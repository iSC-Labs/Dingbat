<!DOCTYPE html>
<html>
<head>
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dingbat</title>

    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700' rel='stylesheet' type='text/css'>
    <link type="text/css" rel="stylesheet" href="build/semantic-ui/css/semantic.min.css" />
    <link type="text/css" rel="stylesheet" href="build/dingbat.min.css" />
</head>
<body>


<script type="text/x-handlebars" data-template-name='_item'>

    <div class="item" {{action "editTask" on="doubleClick"}}>
        {{#if isEditing}}
            <div class="ui large fluid input">
                {{edit-task class="edit" value=title focus-out="acceptChanges" insert-newline="acceptChanges"}}
            </div>
        {{else}}
            <div class="right floated">
                <i class="edit sign link icon" {{action "editTask"}}></i>
                <i class="remove sign link icon" {{action "removeTodo"}}></i>
            </div>
            <i class="empty checkbox link icon" {{action "markAsCompleted"}}></i>
            <div class="content">
                <div {{bind-attr class="isCompleted:completed :header"}}>{{title}}</div>
                <div class="description">
                    {{#if tags}}
                        <i class="tags icon"></i>{{tags}}
                    {{else}}
                        &nbsp;
                    {{/if}}
                </div>
            </div>
        {{/if}}
    </div>
</script>


<script type="text/x-handlebars" data-template-name="tasks/index">

    <!-- add form -->
    <div class="ui fluid large icon input">
        {{input type="text" placeholder="New Task" value=title action="createTask"}}
        <div class="ui large icon button"><i class="add sign icon"></i></div>
    </div>

    <!-- list -->
    <div class="ui segment">

        {{#if high}}
            <div class="ui red ribbon label">High</div>
            <div class="ui relaxed divided selection list">
                {{#each high}}
                    {{partial "item"}}
                {{/each}}
            </div>
        {{/if}}

        {{#if normal}}
            <div class="ui teal ribbon label">Normal</div>
            <div class="ui relaxed divided selection list">
                {{#each normal}}
                    {{partial "item"}}
                {{/each}}
            </div>
        {{/if}}

        {{#if low}}
            <div class="ui green ribbon label">Low</div>
            <div class="ui relaxed divided selection list">
                {{#each low}}
                    {{partial "item"}}
                {{/each}}
            </div>
        {{/if}}

        {{#if completed}}
            <div class="ui ribbon label">Archive</div>
            <div class="ui relaxed divided selection list">
                {{#each completed}}
                    {{partial "item"}}
                {{/each}}
            </div>
        {{/if}}

    </div>
</script>


<script type="text/x-handlebars" data-template-name='_list_item'>

    <div class="item">
        {{#if isEditMode}}
            <div class="ui large fluid input">
                {{edit-list-input value=title insert-newline="update" escape-press="disableEditMode"}}
            </div>
        {{else}}
            <div class="right floated">
                <a {{action "enableEditMode"}}><i class="ui small pencil icon"></i></a>
                <a {{action "delete"}}><i class="ui small remove icon"></i></a>
                <div class="ui label">{{remaining}}</div>
            </div>
            <i class="angle right icon"></i>
            <div class="content">
                <a {{action "showTasks"}}>{{title}}</a>
            </div>
        {{/if}}
    </div>


</script>


<script type="text/x-handlebars" data-template-name="lists/index">

    <!-- sidebar -->
    <div id="sidebar" class="ui right inverted vertical very thin sidebar icon menu">
        <a class="item" data-content="Home">
            <i class="large home link icon"></i>
        </a>
        <a class="item" data-content="Users">
            <i class="large users link icon"></i>
        </a>
        <a class="item" data-content="Settings">
            <i class="large settings link icon"></i>
        </a>
        <a class="item" data-content="Help">
            <i class="large help link icon"></i>
        </a>
        <a class="item" data-content="Help">
            <i class="large sign out link icon"></i>
        </a>
    </div>


    <div class="ui celled grid">

        <!-- lists -->
        <div id="left" class="five wide column">

            <h1 class="ui header">
                Lists
                <div class="ui right floated button" {{action "enableCreateMode"}}>
                    <i class="file icon"></i> Create
                </div>
            </h1>

            {{#if isCreateMode}}
                <div class="ui large fluid icon input">
                    {{create-list-input value=title placeholder="New List" insert-newline="createList"}}
                    <div class="ui large icon button" {{action "createList"}}><i class="add sign icon"></i></div>
                </div>
            {{/if}}

            <div id="lists" class="ui relaxed divided list">
                {{#each}}
                    {{partial "list_item"}}
                {{/each}}
            </div>

        </div>


        <!-- content -->
        <div id="right" class="eleven wide column">

            <!-- header -->
            <h1 class="ui header">
                Project B
                <div class="ui right floated button toggle-sidebar"><i class="list icon"></i> Menu</div>
            </h1>

        </div>
    </div>

</script>


<script type="text/x-handlebars">

    {{outlet}}

</script>


<script src="build/vendor.js" type="text/javascript"></script>
<script src="build/dingbat.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $('.toggle-sidebar').click(function() {
        $('.ui.sidebar').sidebar('toggle');
    });

    $('[data-content]').popup();

    $('#add-form').form({
        task: {
            identifier: 'task',
            rules: [{
                type: 'empty'
            }]
        }
    }, {
        onFailure: function() {
            $(this).transition({
                animation: 'flash',
                duration:  '400ms'
            });
            return false;
        }
    });
</script>

</body>
</html>